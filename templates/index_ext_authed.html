{% load lvm_extras %}
<html>
  <head>
    <title>openATTIC</title>
    <link rel="stylesheet" href="{{ MEDIA_URL }}/extjs/resources/css/ext-all.css" />
    {% if THEME %}
      <link rel="stylesheet" type="text/css" href="{{ MEDIA_URL }}/extjs_themes/css/xtheme-{{ THEME }}.css" />
    {% endif %}
    <script src="{{ MEDIA_URL }}/extjs/adapter/ext/ext-base.js"></script>
    <script src="{{ MEDIA_URL }}/extjs/ext-all.js"></script>
    <script src="{% url django.views.i18n.javascript_catalog %}"></script>
    <script src="{{ PROJECT_URL }}/userprefs/initprefs.js"></script>
    <script src="{{ PROJECT_URL }}/direct/api.js"></script>
    <script type="text/javascript">
      window.MainViewModules = [];
      Ext.namespace("Ext.ux");
      window.MEDIA_URL   = '{{ MEDIA_URL  }}';
      window.PROJECT_URL = '{{ PROJECT_URL  }}';
      window.LOGOUT_URL  = '{% url logout %}';
      window.INDEX_URL   = '{% url index  %}';
    </script>
    <script type="text/javascript" src="{{ MEDIA_URL }}/portal/Portal.js"></script>
    <script type="text/javascript" src="{{ MEDIA_URL }}/portal/PortalColumn.js"></script>
    <script type="text/javascript" src="{{ MEDIA_URL }}/portal/Portlet.js"></script>
    <script src="{{ MEDIA_URL }}/js/directstateprovider.js"></script>
    <script src="{{ MEDIA_URL }}/js/tipify.js"></script>
    <script src="{{ MEDIA_URL }}/js/menutree.js"></script>
    <script src="{{ MEDIA_URL }}/js/portal.js"></script>
    <script src="{{ MEDIA_URL }}/js/dangerousmessage.js"></script>
    <script type="text/javascript">
      Ext.Ajax.on("requestcomplete", function( provider, response, opt ){
        var respdata  = Ext.decode( response.responseText );
        if( respdata.type === "exception" && respdata.message === "Access Denied!" ){
          Ext.oa.RedDangerousMessage.alert("Session expired",
            "It seems your session has expired. The page will now be reloaded so you can login again.",
            function(){
              window.location.reload();
            }
          );
        }
      });
    </script>
    <script src="{% url javascript_main 'auth__user' %}"></script>
    <script src="{% url javascript_main 'settings' %}"></script>

    <script src="{{ MEDIA_URL }}/js/Reorderer.js"></script>
    <script src="{{ MEDIA_URL }}/js/ToolbarReorderer.js"></script>
    <script src="{{ MEDIA_URL }}/js/ToolbarDroppable.js"></script>
    <script src="{{ MEDIA_URL }}/js/ajaxterm.js"></script>
    <script src="{{ MEDIA_URL }}/js/logout_theme.js"></script>
    {% for app in INSTALLED_APPS %}
      {% with app|stringformat:"s/mainhead.html" as apptemplate %}
        {% if apptemplate|template_exists %}
          {% include apptemplate %}
        {% endif %}
      {% endwith %}
    {% endfor %}
    <script src="{{ MEDIA_URL }}/js/mainviewmanager.js"></script>
    <script>
      Ext.onReady( function(){
        Ext.QuickTips.init();
        Ext.chart.Chart.CHART_URL = '{{ MEDIA_URL }}/extjs_charts.swf';

        mainpanel = new Ext.oa.MainViewManager({
          renderTo: document.body
        });
        function updateLayout(){
          viewsize = {
            width:  Ext.lib.Dom.getViewWidth(),
            height: Ext.lib.Dom.getViewHeight()
          };
          mainpanel.setHeight( viewsize.height - 20 );
          mainpanel.setWidth(  viewsize.width  - 40 );
        }
        updateLayout();
        Ext.EventManager.onWindowResize(updateLayout);
      });
    </script>
    <style>
      {% if THEME == "access" %}
        .x-tab-panel-body{
          /* For some reason, the author of xtheme-access set this to white which looks stupid */
          color: #1BE0C6;
          background-color: #1F2730;
          border-color: #18181A;
        }
        .x-tab-panel-body {
          /* For some reason, the author of xtheme-access set this to white which looks stupid */
          background-color: #1F2730;
          border-color: #18181A;
          color: #FFFFF6;
        }
        .x-grid3-row-over .x-grid3-row-table {
          background-color:#454657 !important;
        }
      {% endif %}
      div.munin-graphs { /* Siehe imagespanel.cls */
        padding-top: 10px;
        text-align: center;
        background-color: transparent;
      }
      div.thumb-wrap {
        text-align: center;
        font-size: 14px;
      }
      .x-tree-node-icon {
        height: 22px !important;
        width:  22px !important;
      }
      .redmask {
        background-color: #FF0000;
      }
      .yellowmask {
        background-color: #FFFF00;
      }
      .mainviewtoolbar .x-btn-text {
        height: 45px !important;
      }
    </style>
  </head>
  <body style="padding: 20px 20px 0; ">
  </body>
  <!-- kate: space-indent on; indent-width 2; replace-tabs on; -->
  <!-- vim:set shiftwidth=2 softtabstop=2 expandtab: -->
</html>
