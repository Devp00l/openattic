openATTIC Changelog
===================

All notable changes to this project will be documented in this file.

The format is inspired by the `Keep a Changelog <http://keepachangelog.com/>`_
project, with the exception of using reStructuredText for markup instead of
Markdown.

To describe their impact on the project, changes are grouped as follows:

* **Added** for new features.
* **Changed** for changes in existing functionality.
* **Deprecated** for once-stable features removed in upcoming releases.
* **Removed** for deprecated features removed in this release.
* **Fixed** for any bug fixes.
* **Security** to invite users to upgrade in case of vulnerabilities.

[3.3.1] - unreleased

Added
~~~~~
* Backend: The 'allow_ec_overwrites' flag will now be recognized by
  creating an erasure coded pool (OP-2356)
* Backend: Automatically reload Grafana settings after openattic 
  config file changed (OP-2426)
  
Changed
~~~~~~~
* WebUI: Refactors add form template (OP-2420)

Fixed
~~~~~
* Backend: The status module returns "available" for modules missing
  the status.py file. (OP-2441)
* Backend: The status module returns JSON if a module couldn't be
  found by now. (OP-2440)
* WebUI: Remove unique name errors in pool form (OP-2421)


[3.3.0] - 2017-07-06
--------------------

Added
~~~~~
* Backend: Gracefully handle not properly configured modules (OP-2362)
* WebUI: Gracefully handle not properly configured modules (OP-2363)
* WebUI/QA: Handling of unsaved changes dialog (OP-2189)
* WebUI: Add UI to manage Object Gateway buckets (OP-2368)
* Backend: Implemented a proxy for the access to the Grafana API (OP-2344)
* Backend: Implementation of module settings support (OP-2225, OP-2433)
* WebUI: Make the Salt REST API and RGW configurable from the UI (OP-2226)

Changed
~~~~~~
* Development: Updated SUSE oA repo URL and the Vagrant box image
* Development: Remove editor-specific `# kate: space-indent on...` comments
  from the code base and replace them with an editor-neutral configuration
  file based on the `EditorConfig project <http://editorconfig.org/>_
  (OP-1918)
* Backend: Added support for different modules in FsidContext class (OP-2369)
* WebUI: Replaces "clusterId" usage with "fsid" (OP-2354)
* WebUI: Manage service button moved to datatable toolbar for both NFS and 
  iSCSI (OP-2380)
* WebUI: Hide the details tabset if there is only one visible tab (OP-2393)
* WebUI/Development: Added support for additional actions on
  datatable (OP-2380)
* Backend: CephFS client API support for different Ceph clusters (OP-2371)
* Backend: Added support for SSL error exception in REST Client class (OP-2407)
* WebUI: Replaced Nagios Ceph pools graphs with Grafana graphs, because of a
  better performance. Also, added a dedicated Grafana dashboard that can be
  used when a openATTIC dashboard, with the name Grafana, is created (OP-829)
  Test, that have failed after the changes, has been fixed (OP-2406, OP-2413)

Fixed
~~~~~
* WebUI: Resets graph data if needed (OP-2358)
* WebUI: Hiding graph loading error message if graph data is
  unavailable (OP-2002)
* WebUI: Error 500 if Object Gateway API not accessible (OP-2418)
* QA/Development: Fix JSON of e2e linter configuration (OP-2364)
* Backend: Fix exception handling in the RGW backend (OP-2383)
* Backend: Prevent the 'ValueError: No JSON object could be decoded' error if 
  the result value of a mon_command is an empty string (OP-2345)
* Backend: Add support for `ceph.conf` generated by
  `vstart.sh` or Crowbar (OP-2301)
* Backend: Also allow "crush_rule" for "crush_ruleset". (OP-2381)

[3.2.0] - 2017-06-22
--------------------

Added
~~~~~
* WebUI: Add ability to show/hide passwords (OP-2242)
* WebUI: Created MON widget (OP-1933)
* WebUI: NFS-Ganesha user interface (OP-2195)
* WebUI: Adds backend storage column to OSD table (OP-2346)
* WebUI: Add status page to RGW user management (OP-2292)
* WebUI: Gracefully handle not properly configured NFS module (OP-2337)
* WebUI/Development: Added an angular service to simplify the interaction with 
  background tasks (OP-2349)
* WebUI/Development: Added an angular filter that returns the ordinal value of 
  a number (OP-2350)
* WebUI/Development: Added the oaTabSet component that deprecates oaTabView 
  directive (OP-2351)
* Backend: Added OS errno to the REST Client connection error message (OP-2303)
* Backend: Task metadata support in the TaskQueue (OP-2324)
* Backend: REST Client class improvements (OP-2325)
* Backend: NFS-Ganesha management implementation (OP-2196)
* Backend: Added 'osd_objectstore' to the OSD model (OP-2333)
* Backend: ceph_nfs module status service (OP-2336)

Changed
~~~~~~~
* WebUI/QA: Refactored RBD common library (OP-2286)
* WebUI/QA: Reduced RBD creations in RBD creation suite (OP-2287)
* WebUI: Improve iSCSI state descriptions and icons (OP-2320)
* WebUI: Edit iSCSI target by clicking on target id (OP-2247)
* WebUI: If some column was added/renamed, openATTIC should display the new 
  table column (OP-2112)
* WebUI: Replaces id with fsid in pools service and usage (OP-2121)
* WebUI: Various improvements in the RGW usermanagement UI, e.g. notify user
  about unsaved changes (OP-2255), preselect 'Generate key' and 'Generate
  secret'. Fixed test cases (OP-2353)
* Backend: RadosGW Proxy refactoring (OP-2326, OP-2295)
* Packaging: Consolidate subpackages into a single `openattic` RPM (OP-2342)

Fixed
~~~~~
* WebUI: Harden RBD statistics watcher function (OP-2310)
* Development: Fix requirement files (OP-2316)
* WebUI: Restrict RBD form to replicated pools (OP-2314)
* WebUI: Health widget will not show empty alerts (OP-2263)
* Backend: Fixed validation of urls array for DeepSea ui_rgw call (OP-2338)

[3.1.1] - 2017-06-08
--------------------

Added
~~~~~
* WebUI: Add user/bucket quota support to Object Gateway (RGW) user management
  UI (OP-766 and OP-767).
* WebUI: Added status icons in front of cluster health status in health widget
  (OP-2178)
* WebUI: Show the required field symbol in the RBD form (OP-2204)
* Packaging: Added `--sign` option to `make_dist.py` to sign tarballs with GPG
  (OP-2124)
* Backend/QA: Created basic Gatling tests for the RGW proxy implementation
  (OP-2153)

Changed
~~~~~~~
* WebUI: Upgrade angular-ui-router to version 1.0.3 (OP-2221)
* Installation: Don't allow localhost as the host name for the local host
  (OP-2258)
* Monitoring: replaced deprecated configuration variable names (OP-2288)
* Packaging: Enable byte-compiling the Python files during RPM packaging
  (OP-2167)

Fixed
~~~~~
* Backend: Fix an issue in a multinode setup caused by an newer DRF
  version in Ubuntu 16.04.(OP-2138)
* Backend: Disable CSRF tokens for RGW proxy if token authentication is
  used (OP-2284)
* Backend: Make rest_client.py throw exceptions in the expected format
  (OP-2284/OP-2281)
* Backend: Added missing `volumes.models` module (Django 1.7) (OP-2300)
* Backend: Fix ugly DeprecationWarning (OP-1764)
* Backend: Add formulas to calculate the usage of a Ceph pool correctly (for
  Ceph Luminous and Jewel) (OP-2128)
* Backend: Fix failing OSD list after an OSD has been removed (OP-2279)
* Backend: 'oaconfig install' does no longer fail if a Ceph cluster is
  inaccessible while updating the Nagios configs (OP-2291)
* Backend: Fixed broken dashboard, if `rbd ls` hangs (OP-2294)
* Backend/QA: Fixed Gatling tests to be used with newest versions of
  xmlrunner (OP-2266/OP-2305)
* WebUI: Improved rendering output of notification messages (OP-2278)
* WebUI: Health widget will not show empty alerts (OP-2263)
* Packaging: Adapt `build_deb_packages` to the changes made in `make_dist` for
  3.0

[3.1.0] - 2017-05-24
--------------------

Added
~~~~~
* Backend: Obtain Rados Gateway credentials from DeepSea to enable
  the RGW proxy (OP-2154)
* Backend: Adds search field to the API for RBDs (OP-2199)
* Development: Allow developers and test systems to override
  `backend/settings.py` (OP-2207)
* WebUI: Add Object Gateway user management. (OP-762)

Changed
~~~~~~~
* Backend: The monitoring of RBDs without 'fast-diff' feature has been disabled
  due to performance reasons (OP-2141)
* Backend: Improved REST clients' error message on connection error (OP-2209)
* Backend: Moved iSCSI management code from ceph_deployment to its own module
  (OP-2192)
* WebUI: Required field symbol color changed to red (OP-2215)
* WebUI/QA: More useful ceph pool tests (OP-2205)
* WebUI: Disable the "striping" feature when creating RBD images (OP-2240)
* WebUI: Display a user friendly help text in the GUI for the monitoring of RBDs
  without 'fast-diff' feature (OP-2223)
* WebUI: iSCSI - Only allow to use RBD images with (kernel module) compatible
  features (OP-2232)
* WebUI: Preselect cluster if only one exists for widgets (OP-2151)
* Installation: Moved DB migration code from ``oaconfig install`` to a Django
  command (OP-2160)

Fixed
~~~~~
* WebUI: Rephrases "Sorry Folks" message to be useful (OP-2210)
* WebUI: Changes default widget config to point to the right widget (OP-2203)
* WebUI: Resolves error in health widget (OP-2191)
* Packaging: Re-added `volumes` directory to the base package (OP-2166)
* Backend: Fixed `oaconfig install` on Django 1.7+ installations
  (OP-2166, OP-2169)
* Packaging: Fix re-introduced bug with retrieval of local paths in
  make_dist.py (OP-2224)
* Packaging: Fix internal commit functionality of make_dist.py (OP-2227)

[3.0.0] - 2017-05-15
--------------------

In general, this release focuses on the 3.0 refactoring and cleanup epic
(OP-2071)

Added
~~~~~
* Backend: Ceph iSCSI targets management REST Api (OP-2133)
* Backend: Added the functionality to reset the password of an user (OP-589)
* Backend: Generic REST client support classes (OP-1889)
* Backend: Salt REST API support (OP-1889)
* Backend: Implemented a RGW Admin Ops API proxy (OP-1612)
* Backend: Made `backend/settings.py` variables' adaptable (OP-2156)
* WebUI: Ceph iSCSI targets management (OP-2134)
* WebUI: Introduce a set of commands to build the frontend (OP-1752)
* WebUI: Added OSD status widget (OP-1937)
* WebUI: Add API timeouts to the UI (OP-1544)
* WebUI: Display a warning dialog if there are unsaved changes and the view is
  changed. Thanks to Tiago Melo for the contribution. (OP-1732)
* WebUI: Added a new navbar entry to show recent notifications
  Thanks to Tiago Melo for the contribution. (OP-1989)
* WebUI: Add expression support to the ngRequired directive.
* WebUI: Added eslint configuration for best practice angular development
  (OP-2130)
* WebUI: Added a list of the recent notifications. Thanks to Tiago Melo for the
  contribution. (OP-1989)
* WebUI/QA: Added eslint configuration for e2e tests (OP-2148)

Changed
~~~~~~~
* Backend: Corrected num_bytes unit in check_cephpool Nagios plugin (OP-1532)
* Backend: Salt minions information is now populated using Salt-API (OP-1889)
* WebUI: re-enabled the minions and pillar data listing (OP-1889)
* WebUI: Renames osd service cluster id to fsid (OP-2110)
* WebUI/QA: Adapted tests (OP-2092)
* WebUI: Combined add/edit controller and templates of widgets and dashboards
  (OP-2111)
* WebUI: Improved Ceph health widget (OP-1738)
* API: Convert Postgres based Crushmap API to NoDB (OP-1273)
* WebUI: The WebUI no longer depends on the DB API endpoint (OP-2145)

Removed
~~~~~~~
* Backend/QA: Removed all local-storage related Gatling tests (OP-2119)
* WebUI: Removed all local-storage functionality of openATTIC (OP-2073)
* WebUI/QA: Removed all unnecessary local storage tests of openATTIC (OP-2092)
* For more information why we dropped the local-storage support, see:
  https://www.openattic.org/posts/implementing-a-more-scalable-storage-management-framework-in-openattic-30/

Fixed
~~~~~
* WebUI: Redirect to dashboard when an authenticated user navigates to login
  page. Thanks to Ra�l Vega for the contribution. (OP-2029)
* WebUI: Removed confusing "Sorry folks" message displayed during the loading
  of data tables (OP-1333)
* WebUI: Remove checkbox column in Ceph Nodes. (OP-2150)
* WebUI: Re-enable 'Submit' button on oaDeleteConfirmationModal after failure
  from server (OP-2114)
* Packaging: Fix error that prevented to use local sources to create tar
  archives using make_dist.py (OP-2140)

The CHANGELOG for openATTIC 2.x and older is maintained in the `2.x` git
branch, which was branched off the master branch at git revision
670c60766c5a8be7844fb663f610ee59a7afebaf. This CHANGELOG only keeps track
of changes that have been applied after this point.
