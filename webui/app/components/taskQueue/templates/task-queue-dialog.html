<div class="openattic-modal-header">
    <span>Background-Tasks</span>
</div>
<div class="openattic-modal-content">
    <uib-tabset active="modalTabData.active">
        <uib-tab class="tc_tab_{{tabKey}}" ng-repeat="(tabKey, tab) in tabs" heading="{{tab.name}}
            {{tab.count >= 0 ? ' (' + tab.count + ')' : ''}}" index="$index">
            <p class="tc_loading_{{tabKey}}" ng-hide="tab.loaded">Loading...<p>
            <p class="tc_no_elements_{{tabKey}}" ng-show="tab.loaded && tab.data.length === 0">
                There are no {{tabKey}} Tasks.
            <p>
            <form class="tc_listing_{{tabKey}}" name="{{tab.name}}Tasks" role="form" novalidate ng-show="tab.data.length > 0">
                <div class="dataTables_header clearfix">
                    <button type="button" class="btn btn-sm btn-primary tc_task_delete_{{tabKey}}"
                        ng-class="{disabled: tab.selection.items.length === 0}"  ng-click="taskDeleteAction()">
                        Delete</button>
                </div>

                <table class="table table-striped table-bordered table-hover datatable dataTable task-queue-table">
                    <thead>
                        <tr>
                            <th width="3%">
                                <input type="checkbox" class="tc_select_all_{{tabKey}}"
                                       ng-model="tab.selection.checkAll" ng-change="checkAllTasks()"/>
                            </th>
                            <th ng-repeat="col in tab.tableColumns" ng-click="order(col.attribute)"
                                class="{{orderClass(col.attribute)}} tc-col-{{tabKey}}-{{col.attribute}}"
                                ng-bind="col.name" width="{{col.width}}">
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="row in tab.data | orderBy: tab.tableSort.attribute:tab.tableSort.reverse"
                            ng-class="{ info: isTaskSelected(row) }">
                            <td style="width: 3%">
                                <input class="tc_checkboxes" type="checkbox" ng-checked="isTaskSelected(row)" checklist-model="tab.selection.items"
                                       ng-click="toggleTaskSelection(row, $event)" checklist-value="row"/>
                            </td>
                            <td ng-click="toggleTaskSelection(row, $event)" ng-repeat="attr in tab.tableColumns" style="width: {{attr.width}}">
                                <span ng-if="attr.type === 'text'" ng-bind="getColumnData(attr, row)"></span>
                                <span ng-if="attr.type === 'date'" ng-bind="getColumnData(attr, row) | date:'medium'"></span>
                                <span ng-if="attr.type === 'percent'">
                                    <uib-progressbar value="getColumnData(attr, row)">{{getColumnData(attr, row)}}%</uib-progressbar>
                                </span>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </form>
            <p></p>
            <div class="task-detail panel panel-default" ng-show="tab.selection.item">
                <div class="panel-heading">
                    <h3 class="panel-title">Status of {{tab.selection.item.description}}</h3>
                </div>
                <div class="panel-body">
                    <dl class="dl-horizontal">
                        <div ng-repeat="(key, val) in tab.selection.item" ng-if="val">
                            <dt ng-bind="key"></dt>
                            <dd ng-bind="val"></dd>
                        </div>
                    </dl>
                </div>
            </div>
        </uib-tab>
    </uib-tabset>
</div>
<div class="openattic-modal-footer">
    <div class="button-group text-right">
        <button class="btn btn-default btn-sm modal-close-btn" ng-click="closeTaskQueue()">Close</button>
    </div>
</div>
