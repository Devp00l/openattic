{% comment %}
 Copyright (C) 2011-2015, it-novum GmbH <community@openattic.org>

 openATTIC is free software; you can redistribute it and/or modify it
 under the terms of the GNU General Public License as published by
 the Free Software Foundation; version 2.

 This package is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 GNU General Public License for more details.
{% endcomment %}

{% if IncludeHost %}
define host {
	host_name                       {{ Host.name }}
	address                         127.0.0.1
	process_perf_data               1
	retain_status_information       1
	retain_nonstatus_information    1
	check_command                   check-host-alive
	max_check_attempts              10
	notification_interval           0
	notification_period             24x7
	notification_options            d,u,r
	contact_groups                  admins
	}
{% else %}
# Generating Host stanza for '{{ Host.name }}' is disabled.
{% endif %}

{% for serv in Services %}
define service {
	host_name                 {{ Host.name }}
	service_description       {{ serv.description }}
	contact_groups            openattic_admins
	{% if serv.arguments %}
	check_command             {{ serv.command.name }}!{{ serv.arguments }}
	{% else %}
	check_command             {{ serv.command.name }}
	{% endif %}
	{% if not serv.active %}
	active_checks_enabled     0
	passive_checks_enabled    1
	flap_detection_enabled    0
	{% endif %}
	normal_check_interval     5
	retry_check_interval      1
	max_check_attempts        4
	notification_interval     0
	notification_options      w,u,c,r
	notification_period       24x7
	check_period              24x7
	}
{% endfor %}
