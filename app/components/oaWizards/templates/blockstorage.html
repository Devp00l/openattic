<div ng-controller="blockstorage">
    <br /><br />
    <div class="widget-body">
        <wizard>
            <div class="tab-content">
                <div ng-class="{'active': isActiveTab(1)}" title="Create Volume" class="tab-pane">
                    <h3><strong>Raw Block Storage Step 1 </strong> - Create Volume</h3>
                    <form name="$parent.contentForm1" role="form" class="form-horizontal" novalidate>
                        <div class="form-group" ng-class="{'has-error': (contentForm1.submitted ||
                            contentForm1.volumename.$dirty) && contentForm1.volumename.$invalid}">
                            <label class="col-md-2 control-label" for="volumename">Name</label>
                            <div class="col-md-10">
                                <input type="text" class="form-control" id="volumename" placeholder="Name..."
                                       ng-model="input.volume.name" name="volumename" validname
                                       uniquename required>
                                <span class="help-block tc_nameRequired" ng-show="(contentForm1.submitted ||
                                    contentForm1.volumename.$dirty) && contentForm1.volumename.$error.required">
                                    This field is required!
                                </span>
                                <span class="help-block" ng-show="contentForm1.volumename.$error.validname">
                                    {{errortext}}
                                </span>
                                <span class="help-block tc_noUniqueName"
                                      ng-show="contentForm1.volumename.$error.uniquename">
                                    The chosen volume name is already in use.
                                </span>
                            </div>
                        </div>
                        <div class="form-group" ng-class="{'has-error': (contentForm1.submitted ||
                            contentForm1.source_pool.$dirty) && contentForm1.source_pool.$invalid}">
                            <label class="col-md-2 control-label" for="source_pool">Pool</label>
                            <div class="col-md-10">
                                <select class="form-control" ng-model="input.volume.source_pool"
                                        id="source_pool" ng-options="(pool.name + ' (' + pool.type.name + ', ' +
                                        pool.usage.free_text + ' available)' ) for pool in pools track by pool.id"
                                        name="source_pool" required>
                                    <option class="tc_volumePoolOption" value="">-- Select a pool --</option>
                                </select>
                                <div ng-show="input.volume.source_pool" class="progress-bar-outer clearfix">
                                    <progressbar max="100" class="progress-striped" value="selPoolUsedPercent">
                                        <span></span>
                                    </progressbar>
                                    <span class="pull-left">
                                        {{input.volume.source_pool.usage.used_text}} of
                                        {{input.volume.source_pool.usage.size_text}} used</span>
                                    <span class="pull-right">
                                        {{input.volume.source_pool.usage.free_text}} free
                                    </span>
                                </div>
                                <span class="help-block tc_poolRequired" ng-show="(contentForm1.submitted ||
                                    contentForm1.source_pool.$dirty) && contentForm1.source_pool.$error.required">
                                    This field is required!
                                </span>
                                <span class="help-block" ng-show="contentForm1.source_pool.$error.usablesize">
                                    The selected volumepool provides less than 100MB free space, so it's not
                                    usable for the new volume.
                                </span>
                            </div>
                        </div>
                        <div class="form-group" ng-class="{'has-error': (contentForm1.submitted ||
                            contentForm1.volumemegs.$dirty) && contentForm1.volumemegs.$invalid}">
                            <label class="col-md-2 control-label" for="volumemegs">Size</label>
                            <div class="col-md-10">
                                <input class="form-control" type="text" name="volumemegs"
                                       ng-disabled="input.volume.source_pool == null ||
                                       input.volume.source_pool.usage.free < 100"
                                       volume-size-format volume-size-value
                                       max-value="{{input.volume.source_pool.usage.free}}"
                                       ng-model="input.volume.megs" placeholder="e.g., 10GB"
                                       id="volumemegs" required>
                                <span class="help-block tc_sizeRequired" ng-show="(contentForm1.submitted ||
                                    contentForm1.volumemegs.$dirty) && contentForm1.volumemegs.$error.required">
                                    This field is required!
                                </span>
                                <span class="help-block tc_noValidNumber"
                                      ng-show="contentForm1.volumemegs.$error.volumeSizeFormat">
                                    This is not a valid number.
                                </span>
                                <span class="help-block tc_wrongVolumeSize"
                                      ng-show="contentForm1.volumemegs.$error.volumeSizeValue">
                                    The size must be at least 100MB and must not exceed
                                    {{input.volume.source_pool.usage.free_text}}.
                                </span>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-sm-offset-2 col-sm-10">
                                <div class="checkbox checkbox-primary">
                                    <input type="checkbox" ng-model="input.volume.is_protected"
                                           id="volumeisprotected" name="volumeisprotected">
                                    <label for="volumeisprotected">Deletion protection</label>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
                <div ng-class="{'active': isActiveTab(2)}" title="Create Mirror" class="tab-pane">
                    <h3><strong>Raw Block Storage Step 2 </strong> - Create Mirror - Coming Soon...</h3>
                    <form name="$parent.contentForm2" role="form" class="form-horizontal" novalidate>
                        <div class="form-group" disabled>
                            <label class="col-md-2 control-label">Mirror Host</label>
                            <div class="col-md-10">
                                <select class="form-control" ng-model="input.mirror.host" id="mirrorhost"
                                        ng-options="host.name for host in hosts track by host.name" disabled>
                                    <option value="">-- Select a host --</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group" disabled>
                            <label class="col-md-2 control-label">Mirror Pool</label>
                            <div class="col-md-10">
                                <select class="form-control" ng-model="input.mirror.pool" ng-options="
                                    pool.name for pool in pools track by pool.name" disabled>
                                    <option value="">-- Select a host --</option>
                                </select>
                            </div>
                        </div>
                    </form>
                </div>
                <div ng-class="{'active': isActiveTab(3)}" title="Create Shares" class="tab-pane">
                    <h3><strong>Raw Block Storage Step 3 </strong> - Create a iSCSI/FC Share</h3>
                    <form name="$parent.contentForm3" role="form" class="form-horizontal" novalidate>
                        <div class="form-group" ng-class="{'has-error': (contentForm3.submitted ||
                            contentForm3.iscsifchost.$dirty) && contentForm3.iscsifchost.$invalid}">
                            <label class="col-md-2 control-label" for="iscsifchost">Host</label>
                            <div class="col-md-10">
                                <select class="form-control" ng-model="input.iscsi_fc.host"
                                        ng-options="host.name for host in hosts" id="iscsifchost"
                                        name="iscsifchost">
                                    <option value="">-- Select a host --</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group" ng-class="{'has-error': (contentForm3.submitted ||
                            contentForm3.iscsifclunid.$dirty) && contentForm3.iscsifclunid.$invalid}"
                             ng-show="has_initiator">
                            <label class="col-md-2 control-label" for="iscsifclunid">ID</label>
                            <div class="col-md-10">
                                <input type="number" class="form-control" placeholder="ID..." min="0"
                                       ng-model="input.iscsi_fc.lun_id" name="iscsifclunid" id="iscsifclunid">
                                <span class="help-block" ng-show="(contentForm3.submitted ||
                                    contentForm3.iscsifclunid.$dirty) && contentForm3.iscsifclunid.$error.min">
                                    The LUN ID must be a positive number.
                                </span>
                            </div>
                        </div>
                    </form>
                </div>
                <div ng-class="{'active': isActiveTab(4)}" title="Save configuration" class="tab-pane">
                    <h3 class="tc_wizardDone"><strong>Raw Block Storage Step 4 </strong> - Save configuration</h3>
                    <form name="$parent.contentForm4" role="form" class="form-horizontal" novalidate>
                        <br />
                        <h1 class="text-center text-success">
                            <strong><i class="fa fa-check fa-lg"></i> Raw Block Storage Configuration Complete</strong>
                        </h1>
                        <h4 class="text-center">Click 'Done' to finish</h4>
                        <br />
                    </form>
                </div>
            </div>
        </wizard>
    </div>
</div>