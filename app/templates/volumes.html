<!-- kate: space-indent on; indent-width 4; replace-tabs on; -->
<div ng-controller="VolumeCtrl">
    <oadatatable data="data" filter-config="filterConfig" selection="selection">
        <actions>
            <li dtaction trigger="addAction(oadatatable)"><i class="fa fa-fw fa-plus"></i> Add</li>
            <li dtaction min-selected=1><i class="fa fa-fw fa-upload"></i> Resize</li>
            <li class="divider"></li>
            <li dtaction min-selected=1 max-selected=1 filter="filter_volume_for_cifs(oadatatable)"><i class="fa fa-fw fa-folder"></i>Share via CIFS</li>
            <li dtaction min-selected=1 max-selected=1 filter="filter_volume_for_nfs(oadatatable)" trigger="nfsAction(oadatatable)"><i class="fa fa-fw fa-linux"></i>Share via NFS</li>
            <li class="divider"></li>
            <li dtaction min-selected=1 max-selected=1 filter="filter_volume_for_lun(oadatatable)"><i class="fa fa-fw fa-globe"></i>Share via iSCSI</li>
            <li dtaction min-selected=1 max-selected=1 filter="filter_volume_for_lun(oadatatable)"><i class="fa fa-fw fa-taxi"></i>Share via FC</li>
            <li class="divider"></li>
            <li dtaction min-selected=1><i class="fa fa-fw fa-arrow-up"></i> Mount</li>
            <li dtaction min-selected=1><i class="fa fa-fw fa-arrow-down"></i> Unmount</li>
            <li class="divider"></li>
            <li dtaction min-selected=1 max-selected=1 trigger="deleteAction(oadatatable)"><i class="fa fa-fw fa-trash-o"></i> Delete</li>
        </actions>
        <table class="table table-striped table-bordered table-hover dataTable">
            <thead>
                <tr>
                    <th class="oadatatablecheckbox" ng-if="select.available"><input type="checkbox" ng-model="select.checkAll"/></th>
                    <th sortfield="name"     sortdir="asc" sortheaderclass sortdefault ng-show="columns['Name']">Name</th>
                    <th sortfield="megs"     sortdir="asc" sortheaderclass ng-show="columns['Size']">Size</th>
                    <th ng-show="columns['Used']">Used</th>
                    <th ng-show="columns['Status']">Status</th>
                    <th ng-show="columns['Type']">Type</th>
                    <th ng-show="columns['Path']">Path</th>
                    <th ng-show="columns['Created']">Created</th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="row in data.results" ng-class="{ info: isRowSelected(row) }" ng-click="toggleSelection(row, $event)">
                    <td ng-if="select.available"><input type="checkbox" checklist-model="select.checkedItems" checklist-value="row"/></td>
                    <td ng-show="columns['Name']" ng-bind="row.name"></td>
                    <td ng-show="columns['Size']" ng-bind="row.usage.size_text"></td>
                    <td ng-show="columns['Used']">
                        <div class="progress oaprogress" ng-show="row.usage.used !== undefined"
                                data-toggle="tooltip" data-placement="right"
                                title="Used: {{row.usage.used_text}} &mdash; Free: {{row.usage.free_text}} &mdash; Stolen: {{row.usage.steal_text}}">
                            <div class="progress-bar" role="progressbar"
                                    ng-class="{'progress-bar-success': row.usage.used_pcnt <  row.fswarning,
                                            'progress-bar-warning': row.usage.used_pcnt >= row.fswarning && row.usage.used_pcnt < row.fscritical,
                                            'progress-bar-danger':  row.usage.used_pcnt >= row.fscritical}"
                                    aria-valuenow="{{row.usage.used / row.usage.size * 100}}" aria-valuemin="0" aria-valuemax="100"
                                    style="width: {{row.usage.used / row.usage.size * 100}}%">
                                <span>{{row.usage.used_pcnt | number:2}}%</span>
                            </div>
                            <div class="progress-bar progress-bar-freespace" role="progressbar"
                                    aria-valuenow="{{row.usage.free / row.usage.size * 100}}" aria-valuemin="0" aria-valuemax="100"
                                    style="width: {{row.usage.free / row.usage.size * 100}}%">
                            </div>
                            <div class="progress-bar progress-bar-stolenspace" role="progressbar"
                                    aria-valuenow="{{row.usage.steal / row.usage.size * 100}}" aria-valuemin="0" aria-valuemax="100"
                                    style="width: {{row.usage.steal / row.usage.size * 100}}%">
                            </div>
                        </div>
                    </td>
                    <td ng-show="columns['Status']"><i class="fa" ng-class="{
                        'fa-question':             row.status.status == '',
                        'fa-check':                row.status.status == 'good',
                        'fa-exclamation-triangle': row.status.status == 'warn',
                        'fa-bomb':                 row.status.status == 'crit',
                        'fa-chain-broken':         row.status.status == 'fail',
                        'fa-lock':                 row.status.status == 'locked'
                        }"></i></td>
                    <td ng-show="columns['Type']" ng-bind="row.type"></td>
                    <td ng-show="columns['Path']" ng-bind="row.path"></td>
                    <td ng-show="columns['Created']" ng-bind="row.createdate | date:'short'"></td>
                </tr>
            </tbody>
        </table>
    </oadatatable>
    <div ui-view="tab">
    </div>
</div>
